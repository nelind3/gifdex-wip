{
  "lexicon": 1,
  "id": "net.gifdex.feed.post",
  "defs": {
    "main": {
      "type": "record",
      "key": "any",
      "record": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "maxGraphemes": 80,
            "description": "The title of the post."
          },
          "tags": {
            "type": "array",
            "items": {
              "maxGraphemes": 10,
              "type": "string"
            },
            "maxLength": 5,
            "description": "Tags that apply to the content of the post, used for discoverability."
          },
          "languages": {
            "type": "array",
            "items": {
              "maxGraphemes": 5,
              "type": "string",
              "format": "language"
            },
            "maxLength": 2,
            "description": "Indicates human language of post content, including title and the media itself."
          },
          "media": {
            "type": "ref",
            "ref": "#media"
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "unlisted",
                "nsfw",
                "content-warning",
                "gore",
                "flashing-lights"
              ]
            }
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "Client-declared timestamp when this post was originally created."
          }
        },
        "required": ["title", "tags", "media", "createdAt"]
      }
    },
    "media": {
      "type": "object",
      "properties": {
        "alt": {
          "type": "string"
        },
        "blob": {
          "type": "blob",
          "accept": ["image/webp"],
          "maxSize": 1000000
        }
      },
      "required": ["blob"]
    },
    "selfLabel": {
      "type": "object",
      "properties": {
        "rule": {
          "type": "string",
          "format": "at-uri",
          "description": "The rkey of the rule being applied (from net.gifdex.labeler.rule). Rule must enable selfLabel."
        },
        "reason": {
          "type": "string",
          "maxGraphemes": 200,
          "description": "Optional explanation for this label"
        }
      },
      "required": ["rule"]
    }
  }
}
